<ion-content class="ion-padding">
  <form [formGroup]="experienciaForm" (ngSubmit)="onSubmit()">
    <ion-item>
      <ion-label position="floating">Empresa</ion-label>
      <ion-input formControlName="empresa"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="experienciaForm.controls['empresa'].invalid && experienciaForm.controls['empresa'].touched">
      <p>La empresa es requerida.</p>
    </ion-text>

    <ion-item>
      <ion-label position="floating">Año de Inicio</ion-label>
      <ion-input formControlName="anoInicio" type="number"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="experienciaForm.controls['anoInicio'].invalid && experienciaForm.controls['anoInicio']?.touched">
      <p>Año de inicio inválido.</p>
    </ion-text>

    <ion-item>
      <ion-label position="floating">Cargo</ion-label>
      <ion-input formControlName="cargo"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="experienciaForm.controls['cargo'].invalid && experienciaForm.controls['cargo']?.touched">
      <p>El cargo es requerido.</p>
    </ion-text>

    <ion-item>
      <ion-label position="floating">Año de Término</ion-label>
      <ion-input formControlName="anoTermino" type="number"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label>Actual</ion-label>
      <ion-checkbox formControlName="actual"></ion-checkbox>
    </ion-item>

    <ion-button expand="full" type="submit" [disabled]="experienciaForm.invalid">
      {{ selectedExperienciaId ? 'Actualizar' : 'Agregar' }} Experiencia
    </ion-button>
  </form>

  <!-- Listado de experiencias laborales -->
  <ion-list *ngIf="experiencias.length > 0">
    <ion-item class="lista-item" *ngFor="let experience of experiencias">
      <ion-label>
        <h2>{{ experience.empresa }}</h2>
        <p>{{ experience.cargo }} ({{ experience.ano_inicio }} - {{ experience.actual ? 'Presente' : experience.ano_termino }})</p>
      </ion-label>
      <ion-button class="botones-crud" fill="clear" (click)="onEdit(experience)">Editar</ion-button>
      <ion-button class="botones-crud" fill="clear" color="danger" (click)="deleteExperiencia(experience.id)">Eliminar</ion-button>
    </ion-item>
  </ion-list>
</ion-content>
